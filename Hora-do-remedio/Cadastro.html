<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cadastro</title>
    <link rel="stylesheet" href="Cadastro.css" />
</head>
<body>
    <div class="container">
        <div class="title">
            <h1>Cadastro de Medicamentos</h1>
        </div>
        <div class="formularioMedicamentos">
            <h3>Adicione um medicamento e horário</h3>     
            <form id="medicamentoForm">
                <div class="nomeRemedio">
                    <label for="nome">Nome do Medicamento:</label>
                    <input type="text" id="nome" name="nome" required>
                </div>

                <div class="containerValidade">
                    <label for="validade">Data de validade</label>
                    <input id="validade" type="date" name="validade"/>
                </div>

                <div class="containerQuantidade">
                    <label for="quantidade" >Quantidade em Estoque</label>
                    <input id="quantidade" type="number" name="quantidade" value="1" min="1"/>
                </div>

                <label class="primeiroHorario" for="horario1">Adicione o primeiro horário</label>
                <select id="horario1" name="horario1" required>
                    <option value="">Selecione um horário</option>
                    <option>00:00</option>
                    <option>01:00</option>
                    <option>02:00</option>
                    <option>03:00</option>
                    <option>04:00</option>
                    <option>05:00</option>
                    <option>06:00</option>
                    <option>07:00</option>
                    <option>08:00</option>
                    <option>09:00</option>
                    <option>10:00</option>
                    <option>11:00</option>
                    <option>12:00</option>
                    <option>13:00</option>
                    <option>14:00</option>
                    <option>15:00</option>
                    <option>16:00</option>
                    <option>17:00</option>
                    <option>18:00</option>
                    <option>19:00</option>
                    <option>20:00</option>
                    <option>21:00</option>
                    <option>22:00</option>
                    <option>23:00</option>
                </select>

                <label class="segundoHorario" for="horario2">Adicione o segundo horário</label>
                <select id="horario2" name="horario2">
                    <option value="">Selecione um horário</option>
                    <option>00:00</option>
                    <option>01:00</option>
                    <option>02:00</option>
                    <option>03:00</option>
                    <option>04:00</option>
                    <option>05:00</option>
                    <option>06:00</option>
                    <option>07:00</option>
                    <option>08:00</option>
                    <option>09:00</option>
                    <option>10:00</option>
                    <option>11:00</option>
                    <option>12:00</option>
                    <option>13:00</option>
                    <option>14:00</option>
                    <option>15:00</option>
                    <option>16:00</option>
                    <option>17:00</option>
                    <option>18:00</option>
                    <option>19:00</option>
                    <option>20:00</option>
                    <option>21:00</option>
                    <option>22:00</option>
                    <option>23:00</option>
                </select>
                
                <label for="descricao">
                    <textarea id="descricao" name="descricao" class='descricao' type='text' placeholder='Coloque aqui a descrição do Remédio' ></textarea>
                </label>

                <div class="button_adicionar">
                    <button type="submit">Adicionar</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        document.getElementById('medicamentoForm').addEventListener('submit', function(event) {
            event.preventDefault(); // Impede o envio padrão do formulário

            const nome = document.getElementById('nome').value;
            const validade = document.getElementById('validade').value;
            const quantidade = document.getElementById('quantidade').value;
            const horario1 = document.getElementById('horario1').value;
            const horario2 = document.getElementById('horario2').value;
            const descricao = document.getElementById('descricao').value;


            // Enviar os dados para o servidor
            fetch('http://localhost:3000/api/cadastrar', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ nome, validade, quantidade, horario1, horario2, descricao })
            })
            .then(response => response.json())
            .then(data => {
                alert(data.message); // Exibe uma mensagem de sucesso
                document.getElementById('medicamentoForm').reset(); // Limpa o formulário
            })
            .catch(error => console.error('Erro:', error));
        });
    </script>
</body>
</html>